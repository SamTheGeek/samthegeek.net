---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import BlogList from '../../components/BlogList.astro';
import '../../styles/blog.css';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const postsPerPage = 10;
const page = 1;
const totalPages = Math.max(1, Math.ceil(sortedPosts.length / postsPerPage));
const pagePosts = sortedPosts.slice(0, postsPerPage);
---

<BaseLayout
  title="Blog - I am Sam"
  description="Thoughts on technology, product development, and making things."
  activePath="/blog"
>
  <BlogList posts={pagePosts} page={page} totalPages={totalPages} />
</BaseLayout>
